import{v as q,_ as B}from"./inline-px-to-vw-D8KcBwHu.js";import{d as C,l as S,m as U,r as _,n as g,p as M,c as N,o as F,e as r,q as i,a as d,b as e,v as c,t as p,x as z,y as f}from"./index-BS8FVB4C.js";import"./index-DbDsBmEX.js";import{F as D,a as G}from"./index-DOONYFqD.js";import{B as T}from"./index-DZB7icrh.js";import{b as y}from"./route-block-B_A1xBdJ.js";import"./toNumber-BA28v8oo.js";import"./index-BVU_NsVF.js";const $={class:"m-x-a text-center w-7xl"},E={class:"rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16 rounded-3xl overflow-hidden"},j={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16 rounded-3xl overflow-hidden"},H={class:"mt-16"},I=C({__name:"index",setup(J){const V=S(),v=U(),m=_(!1),s=g({email:"",code:"",nickname:"",password:"",confirmPassword:""}),a=g({email:[{required:!0,message:"请输入邮箱"}],code:[{required:!0,message:"请输入验证码"}],nickname:[{required:!0,message:"请输入昵称"}],password:[{required:!0,message:"请输入密码"}],confirmPassword:[{required:!0,message:"请再次输入密码"},{required:!0,validator:l=>l===s.password,message:"两次输入的密码不一致"}]});async function x(){try{m.value=!0,(await v.register()).code===0&&(f({type:"success",message:"注册成功"}),V.push({name:"Login"}))}finally{m.value=!1}}const u=_(!1),k=M(()=>u.value?"获取中":"获取验证码");async function b(){if(!s.email){f({type:"warning",message:"请输入邮箱"});return}u.value=!0;const l=await v.getCode();l.code===0&&f({type:"success",message:"已发送，验证码为: ".concat(l.result)}),u.value=!1}return(l,o)=>{const n=D,w=T,h=G,P=B;return F(),N("div",$,[r(h,{model:e(s),rules:e(a),"validate-trigger":"onSubmit",onSubmit:x},{default:i(()=>[d("div",E,[r(n,{modelValue:e(s).email,"onUpdate:modelValue":o[0]||(o[0]=t=>e(s).email=t),modelModifiers:{trim:!0},rules:e(a).email,name:"email",placeholder:"邮箱"},null,8,["modelValue","rules"])]),d("div",L,[r(n,{modelValue:e(s).code,"onUpdate:modelValue":o[1]||(o[1]=t=>e(s).code=t),modelModifiers:{trim:!0},rules:e(a).code,name:"code",placeholder:"验证码"},{button:i(()=>[r(w,{size:"small",type:"primary",plain:"",onClick:b},{default:i(()=>[c(p(e(k)),1)]),_:1})]),_:1},8,["modelValue","rules"])]),d("div",R,[r(n,{modelValue:e(s).nickname,"onUpdate:modelValue":o[2]||(o[2]=t=>e(s).nickname=t),modelModifiers:{trim:!0},rules:e(a).nickname,name:"nickname",placeholder:"昵称"},null,8,["modelValue","rules"])]),d("div",j,[r(n,{modelValue:e(s).password,"onUpdate:modelValue":o[3]||(o[3]=t=>e(s).password=t),modelModifiers:{trim:!0},type:"password",rules:e(a).password,name:"password",placeholder:"密码"},null,8,["modelValue","rules"])]),d("div",A,[r(n,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=t=>e(s).confirmPassword=t),modelModifiers:{trim:!0},type:"password",rules:e(a).confirmPassword,name:"confirmPassword",placeholder:"再次输入密码"},null,8,["modelValue","rules"])]),d("div",H,[r(w,{loading:e(m),type:"primary","native-type":"submit",round:"",block:""},{default:i(()=>[...o[5]||(o[5]=[c(p("确认"),-1)])]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),r(P,{to:"login",block:"",style:z({"margin-top":e(q)(8)})},{default:i(()=>[...o[6]||(o[6]=[c(p("返回登录"),-1)])]),_:1},8,["style"])])}}});typeof y=="function"&&y(I);export{I as default};
