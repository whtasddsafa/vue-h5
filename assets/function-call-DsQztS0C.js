import{d as B,z as y,a8 as w,a2 as k,a9 as z,C as M,w as v,f as N,h as L,e as s,K as b,$ as j,a0 as U,I as V,N as q,a5 as D,Z as C,aa as H,ab as K,r as Z,ac as _,g as $}from"./index-BS8FVB4C.js";import{L as A}from"./index-BVU_NsVF.js";let f=0;function E(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[F,i]=M("toast"),G=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],J={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:y,iconSize:y,duration:z(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:y};var Q=B({name:F,props:J,emits:["update:show"],setup(e,{emit:t,slots:a}){let l,c=!1;const r=()=>{const n=e.show&&e.forbidClick;c!==n&&(c=n,E(c))},d=n=>t("update:show",n),g=()=>{e.closeOnClick&&d(!1)},u=()=>clearTimeout(l),x=()=>{const{icon:n,type:o,iconSize:h,iconPrefix:I,loadingType:T}=e;if(n||o==="success"||o==="fail")return s(V,{name:n||o,size:h,class:i("icon"),classPrefix:I},null);if(o==="loading")return s(A,{class:i("loading"),size:h,type:T},null)},P=()=>{const{type:n,message:o}=e;if(a.message)return s("div",{class:i("text")},[a.message()]);if(q(o)&&o!=="")return n==="html"?s("div",{key:0,class:i("text"),innerHTML:String(o)},null):s("div",{class:i("text")},[o])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),N(r),L(r),()=>s(U,b({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:u,"onUpdate:show":d},j(e,G)),{default:()=>[x(),P()]})}});const R={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],W=!1,p=C({},R);const X=new Map;function O(e){return H(e)?e:{message:e}}function Y(){const{instance:e}=K({setup(){const t=Z(""),{open:a,state:l,close:c,toggle:r}=_(),d=()=>{},g=()=>s(Q,b(l,{onClosed:d,"onUpdate:show":r}),null);return v(t,u=>{l.message=u}),$().render=g,{open:a,close:c,message:t}}});return e}function ee(){if(!m.length||W){const e=Y();m.push(e)}return m[m.length-1]}function te(e={}){if(!D)return{};const t=ee(),a=O(e);return t.open(C({},p,X.get(a.type||p.type),a)),t}const S=e=>t=>te(C({type:e},O(t))),se=S("loading"),ie=S("success");export{te as a,se as b,ie as c,Q as s};
