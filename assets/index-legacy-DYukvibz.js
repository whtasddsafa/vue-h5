System.register(["./index-legacy-BFvFMDVu.js","./index-legacy-BBfXHlBt.js","./index-legacy-CaGT3NsQ.js"],function(e,t){"use strict";var a,r,l,n,o,i,s,u,c,d,g,m,f,p,v,h,b,y,S,x,w,k,V,B,E,M,C,I,P,A,T,z,$,j,L,W,q,F,_,R,H,O,D,K,N,G,U;return{setters:[e=>{a=e.h,r=e.d,l=e.L,n=e.n,o=e.c,i=e.a2,s=e.a3,u=e.b,c=e.a4,d=e.V,g=e.w,m=e.a5,f=e.a6,p=e.a7,v=e.a8,h=e.a9,b=e.aa,y=e.E,S=e.v,x=e.ab,w=e.f,k=e.e,V=e.x,B=e.y,E=e.T,M=e.ac,C=e.S,I=e.R,P=e.ad,A=e.I,T=e._,z=e.K,$=e.u,j=e.ae,L=e.G,W=e.P,q=e.U,F=e.af,_=e.ag,R=e.ah,H=e.q,O=e.o,D=e.l,K=e.ai},e=>{N=e.C,G=e.c},e=>{U=e.B}],execute:function(){let t=0;const[J,Q]=o("form"),X={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:n,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:l,showErrorMessage:l,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Y=r({name:J,props:X,emits:["submit","failed"],setup(e,{emit:t,slots:a}){const{children:r,linkChildren:l}=i(c),n=e=>e?r.filter(t=>e.includes(t.name)):r,o=t=>{return"string"==typeof t?(e=>{const t=r.find(t=>t.name===e);return t?new Promise((e,a)=>{t.validate().then(t=>{t?a(t):e()})}):Promise.reject()})(t):e.validateFirst?(a=t,new Promise((e,t)=>{const r=[];n(a).reduce((e,t)=>e.then(()=>{if(!r.length)return t.validate().then(e=>{e&&r.push(e)})}),Promise.resolve()).then(()=>{r.length?t(r):e()})})):(e=>new Promise((t,a)=>{const r=n(e);Promise.all(r.map(e=>e.validate())).then(e=>{(e=e.filter(Boolean)).length?a(e):t()})}))(t);var a},g=(e,t)=>{r.some(a=>a.name===e&&(a.$el.scrollIntoView(t),!0))},m=()=>r.reduce((e,t)=>(void 0!==t.name&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const a=m();o().then(()=>t("submit",a)).catch(r=>{t("failed",{values:a,errors:r});const{scrollToError:l,scrollToErrorPosition:n}=e;l&&r[0].name&&g(r[0].name,n?{block:n}:void 0)})},p=e=>{d(e),f()};return l({props:e}),s({submit:f,validate:o,getValues:m,scrollToField:g,resetValidation:e=>{"string"==typeof e&&(e=[e]),n(e).forEach(e=>{e.resetValidation()})},getValidationStatus:()=>r.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{})}),()=>{var e;return u("form",{class:Q(),onSubmit:p},[null==(e=a.default)?void 0:e.call(a)])}}});function Z(e){return Array.isArray(e)?!e.length:0!==e&&!e}function ee(e,t){const{message:a}=t;return v(a)?a(e,t):a||""}function te({target:e}){e.composing=!0}function ae({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function re(e){return[...e].length}function le(e,t){return[...e].slice(0,t).join("")}e("a",g(Y));const[ne,oe]=o("field"),ie={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:n,max:Number,min:Number,formatter:Function,clearIcon:T("clear"),modelValue:z(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:T("focus"),formatTrigger:T("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},se=b({},G,ie,{rows:n,type:T("text"),rules:Array,autosize:[Boolean,Object],labelWidth:n,labelClass:$,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ue=r({name:ne,props:se,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:r,slots:l}){const n=function(){const e=a(),{name:r="unknown"}=(null==e?void 0:e.type)||{};return`${r}-${++t}`}(),o=y({status:"unvalidated",focused:!1,validateMessage:""}),i=S(),g=S(),v=S(),{parent:b}=x(c),T=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},z=t=>C(e[t])?e[t]:b&&C(b.props[t])?b.props[t]:void 0,$=w(()=>{const t=z("readonly");if(e.clearable&&!t){const t=""!==T(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&o.focused;return t&&a}return!1}),R=w(()=>v.value&&l.input?v.value():e.modelValue),H=w(()=>{var t;const a=z("required");return"auto"===a?null==(t=e.rules)?void 0:t.some(e=>e.required):a}),O=e=>e.reduce((e,t)=>e.then(()=>{if("failed"===o.status)return;let{value:e}=R;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(Z(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return o.status="failed",void(o.validateMessage=ee(e,t));if(t.validator){if(Z(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise(a=>{const r=t.validator(e,t);h(r)?r.then(a):a(r)})}(e,t).then(a=>{a&&"string"==typeof a?(o.status="failed",o.validateMessage=a):!1===a&&(o.status="failed",o.validateMessage=ee(e,t))})}}),Promise.resolve()),D=()=>{o.status="unvalidated",o.validateMessage=""},K=()=>r("endValidate",{status:o.status,message:o.validateMessage}),G=(t=e.rules)=>new Promise(a=>{D(),t?(r("startValidate"),O(t).then(()=>{"failed"===o.status?(a({name:e.name,message:o.validateMessage}),K()):(o.status="passed",a(),K())})):a()}),U=t=>{if(b&&e.rules){const{validateTrigger:a}=b.props,r=j(a).includes(t),l=e.rules.filter(e=>e.trigger?j(e.trigger).includes(t):r);l.length&&G(l)}},J=(t,a="onChange")=>{var l,n;const s=t;t=(t=>{var a;const{maxlength:r}=e;if(C(r)&&re(t)>+r){const e=T();if(e&&re(e)===+r)return e;const l=null==(a=i.value)?void 0:a.selectionEnd;if(o.focused&&l){const e=[...t],a=e.length-+r;return e.splice(l-a,a),e.join("")}return le(t,+r)}return t})(t);const u=re(s)-re(t);if("number"===e.type||"digit"===e.type){const r="number"===e.type;if(t=I(t,r,r),"onBlur"===a&&""!==t&&(void 0!==e.min||void 0!==e.max)){const a=P(+t,null!=(l=e.min)?l:-1/0,null!=(n=e.max)?n:1/0);+t!==a&&(t=a.toString())}}let c=0;if(e.formatter&&a===e.formatTrigger){const{formatter:a,maxlength:r}=e;if(t=a(t),C(r)&&re(t)>+r&&(t=le(t,+r)),i.value&&o.focused){const{selectionEnd:e}=i.value,t=le(s,e);c=re(a(t))-re(t)}}if(i.value&&i.value.value!==t)if(o.focused){let{selectionStart:e,selectionEnd:a}=i.value;if(i.value.value=t,C(e)&&C(a)){const r=re(t);u?(e-=u,a-=u):c&&(e+=c,a+=c),i.value.setSelectionRange(Math.min(e,r),Math.min(a,r))}}else i.value.value=t;t!==e.modelValue&&r("update:modelValue",t)},Q=e=>{e.target.composing||J(e.target.value)},X=()=>{var e;return null==(e=i.value)?void 0:e.blur()},Y=()=>{var e;return null==(e=i.value)?void 0:e.focus()},ne=()=>{const t=i.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const a=m();e.style.height="auto";let r=e.scrollHeight;if(f(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(r=Math.min(r,e)),void 0!==a&&(r=Math.max(r,a))}r&&(e.style.height=`${r}px`,p(a))}(t,e.autosize)},ie=e=>{o.focused=!0,r("focus",e),E(ne),z("readonly")&&X()},se=e=>{o.focused=!1,J(T(),"onBlur"),r("blur",e),z("readonly")||(U("onBlur"),E(ne),q())},ue=e=>r("clickInput",e),ce=e=>r("clickLeftIcon",e),de=e=>r("clickRightIcon",e),ge=w(()=>"boolean"==typeof e.error?e.error:!(!b||!b.props.showError||"failed"!==o.status)||void 0),me=w(()=>{const e=z("labelWidth"),t=z("labelAlign");if(e&&"top"!==t)return{width:k(e)}}),fe=t=>{13===t.keyCode&&(b&&b.props.submitOnEnter||"textarea"===e.type||d(t),"search"===e.type&&X()),r("keypress",t)},pe=()=>e.id||`${n}-input`,ve=()=>{const t=oe("control",[z("inputAlign"),{error:ge.value,custom:!!l.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(l.input)return u("div",{class:t,onClick:ue},[l.input()]);const a={id:pe(),ref:i,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:z("disabled"),readonly:z("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${n}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:se,onFocus:ie,onInput:Q,onClick:ue,onChange:ae,onKeypress:fe,onCompositionend:ae,onCompositionstart:te};return"textarea"===e.type?u("textarea",W(a,{inputmode:e.inputmode}),null):u("input",W((r=e.type,o=e.inputmode,"number"===r&&(r="text",null!=o||(o="decimal")),"digit"===r&&(r="tel",null!=o||(o="numeric")),{type:r,inputmode:o}),a),null);var r,o},he=()=>{const t=l["right-icon"];if(e.rightIcon||t)return u("div",{class:oe("right-icon"),onClick:de},[t?t():u(A,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},be=()=>{if(e.showWordLimit&&e.maxlength){const t=re(T());return u("div",{class:oe("word-limit")},[u("span",{class:oe("word-num")},[t]),L("/"),e.maxlength])}},ye=()=>{if(b&&!1===b.props.showErrorMessage)return;const t=e.errorMessage||o.validateMessage;if(t){const e=l["error-message"],a=z("errorMessageAlign");return u("div",{class:oe("error-message",a)},[e?e({message:t}):t])}},Se=()=>[u("div",{class:oe("body")},[ve(),$.value&&u(A,{ref:g,name:e.clearIcon,class:oe("clear")},null),he(),l.button&&u("div",{class:oe("button")},[l.button()])]),be(),ye()];return s({blur:X,focus:Y,validate:G,formValue:R,resetValidation:D,getValidationStatus:()=>o.status}),F(_,{customValue:v,resetValidation:D,validateWithTrigger:U}),V(()=>e.modelValue,()=>{J(T()),D(),U("onChange"),E(ne)}),B(()=>{J(T(),e.formatTrigger),E(ne)}),M("touchstart",e=>{d(e),r("update:modelValue",""),r("clear",e)},{target:w(()=>{var e;return null==(e=g.value)?void 0:e.$el})}),()=>{const t=z("disabled"),a=z("labelAlign"),r=(()=>{const t=l["left-icon"];if(e.leftIcon||t)return u("div",{class:oe("left-icon"),onClick:ce},[t?t():u(A,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return u(N,{size:e.size,class:oe({error:ge.value,disabled:t,[`label-${a}`]:a}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:me.value,valueClass:oe("value"),titleClass:[oe("label",[a,{required:H.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:r&&"top"!==a?()=>r:null,title:()=>{const t=(()=>{const t=z("labelWidth"),a=z("labelAlign"),r=z("colon")?":":"";return l.label?[l.label(),r]:e.label?u("label",{id:`${n}-label`,for:l.input?void 0:pe(),"data-allow-mismatch":"attribute",onClick:e=>{d(e),Y()},style:"top"===a&&t?{width:k(t)}:void 0},[e.label+r]):void 0})();return"top"===a?[r,t].filter(Boolean):t||[]},value:Se,extra:l.extra})}}});e("F",g(ue)),e("_",R({},[["render",function(e,t){const a=U;return O(),H(a,{size:"small",plain:"",type:"primary"},{default:D(()=>[K(e.$slots,"default",{},void 0,!0)]),_:3})}],["__scopeId","data-v-eaa60a3d"]]))}}});
