import{v as q,_ as B}from"./inline-px-to-vw-D8KcBwHu.js";import{d as C,l as S,m as U,r as v,n as g,p as M,c as N,o as F,e as t,q as d,a as n,b as e,v as p,t as c,x as z,y as f}from"./index-BS8FVB4C.js";import"./index-DbDsBmEX.js";import{F as D,a as G}from"./index-DOONYFqD.js";import{B as T}from"./index-DZB7icrh.js";import{b as y}from"./route-block-B_A1xBdJ.js";import"./toNumber-BA28v8oo.js";import"./index-BVU_NsVF.js";const $={class:"m-x-a text-center w-7xl"},E={class:"rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16 rounded-3xl overflow-hidden"},j={class:"mt-16 rounded-3xl overflow-hidden"},A={class:"mt-16"},H=C({__name:"index",setup(I){const V=S(),_=U(),m=v(!1),s=g({email:"",code:"",password:"",confirmPassword:""}),l=g({email:[{required:!0,message:"请输入邮箱"}],code:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入密码"}],confirmPassword:[{required:!0,message:"请再次输入密码"},{required:!0,validator:a=>a===s.password,message:"两次输入的密码不一致"}]});async function x(){try{m.value=!0,(await _.reset()).code===0&&(f({type:"success",message:"密码重置成功"}),V.push({name:"Login"}))}finally{m.value=!1}}const u=v(!1),b=M(()=>u.value?"获取中":"获取验证码");async function P(){if(!s.email){f({type:"warning",message:"请输入邮箱"});return}u.value=!0;const a=await _.getCode();a.code===0&&f({type:"success",message:"已发送，验证码为: ".concat(a.result)}),u.value=!1}return(a,o)=>{const i=D,w=T,h=G,k=B;return F(),N("div",$,[t(h,{model:e(s),rules:e(l),"validate-trigger":"onSubmit",onSubmit:x},{default:d(()=>[n("div",E,[t(i,{modelValue:e(s).email,"onUpdate:modelValue":o[0]||(o[0]=r=>e(s).email=r),modelModifiers:{trim:!0},rules:e(l).email,name:"email",placeholder:"邮箱"},null,8,["modelValue","rules"])]),n("div",L,[t(i,{modelValue:e(s).code,"onUpdate:modelValue":o[1]||(o[1]=r=>e(s).code=r),modelModifiers:{trim:!0},rules:e(l).code,name:"code",placeholder:"验证码"},{button:d(()=>[t(w,{size:"small",type:"primary",plain:"",onClick:P},{default:d(()=>[p(c(e(b)),1)]),_:1})]),_:1},8,["modelValue","rules"])]),n("div",R,[t(i,{modelValue:e(s).password,"onUpdate:modelValue":o[2]||(o[2]=r=>e(s).password=r),modelModifiers:{trim:!0},type:"password",rules:e(l).password,name:"password",placeholder:"密码"},null,8,["modelValue","rules"])]),n("div",j,[t(i,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":o[3]||(o[3]=r=>e(s).confirmPassword=r),modelModifiers:{trim:!0},type:"password",rules:e(l).confirmPassword,name:"confirmPassword",placeholder:"再次输入密码"},null,8,["modelValue","rules"])]),n("div",A,[t(w,{loading:e(m),type:"primary","native-type":"submit",round:"",block:""},{default:d(()=>[...o[4]||(o[4]=[p(c("确认"),-1)])]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t(k,{to:"login",block:"",style:z({"margin-top":e(q)(8)})},{default:d(()=>[...o[5]||(o[5]=[p(c("返回登录"),-1)])]),_:1},8,["style"])])}}});typeof y=="function"&&y(H);export{H as default};
