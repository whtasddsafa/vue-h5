import{F as C,a as q,_ as B}from"./index-DfJpz_9X.js";import{d as S,s as U,D as M,v as _,E as g,f as N,j as D,o as F,b as r,l as i,k as d,p as e,G as c,C as p,H as G,J as f}from"./index-c8Fo5no0.js";import"./index-j4eQ2Eld.js";import{v as z}from"./inline-px-to-vw-CvFL2hsn.js";import{B as E}from"./index-a-cluaxF.js";import{b as y}from"./route-block-B_A1xBdJ.js";import"./toNumber-BA28v8oo.js";import"./index-D5QMxqjy.js";const T={class:"m-x-a text-center w-7xl"},$={class:"rounded-3xl overflow-hidden"},j={class:"mt-16 rounded-3xl overflow-hidden"},H={class:"mt-16 rounded-3xl overflow-hidden"},J={class:"mt-16 rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},R={class:"mt-16"},A=S({__name:"index",setup(I){const V=U(),v=M(),m=_(!1),s=g({email:"",code:"",nickname:"",password:"",confirmPassword:""}),a=g({email:[{required:!0,message:"请输入邮箱"}],code:[{required:!0,message:"请输入验证码"}],nickname:[{required:!0,message:"请输入昵称"}],password:[{required:!0,message:"请输入密码"}],confirmPassword:[{required:!0,message:"请再次输入密码"},{required:!0,validator:l=>l===s.password,message:"两次输入的密码不一致"}]});async function x(){try{m.value=!0,(await v.register()).code===0&&(f({type:"success",message:"注册成功"}),V.push({name:"Login"}))}finally{m.value=!1}}const u=_(!1),k=N(()=>u.value?"获取中":"获取验证码");async function b(){if(!s.email){f({type:"warning",message:"请输入邮箱"});return}u.value=!0;const l=await v.getCode();l.code===0&&f({type:"success",message:"已发送，验证码为: ".concat(l.result)}),u.value=!1}return(l,o)=>{const n=C,w=E,h=q,P=B;return F(),D("div",T,[r(h,{model:e(s),rules:e(a),"validate-trigger":"onSubmit",onSubmit:x},{default:i(()=>[d("div",$,[r(n,{modelValue:e(s).email,"onUpdate:modelValue":o[0]||(o[0]=t=>e(s).email=t),modelModifiers:{trim:!0},rules:e(a).email,name:"email",placeholder:"邮箱"},null,8,["modelValue","rules"])]),d("div",j,[r(n,{modelValue:e(s).code,"onUpdate:modelValue":o[1]||(o[1]=t=>e(s).code=t),modelModifiers:{trim:!0},rules:e(a).code,name:"code",placeholder:"验证码"},{button:i(()=>[r(w,{size:"small",type:"primary",plain:"",onClick:b},{default:i(()=>[c(p(e(k)),1)]),_:1})]),_:1},8,["modelValue","rules"])]),d("div",H,[r(n,{modelValue:e(s).nickname,"onUpdate:modelValue":o[2]||(o[2]=t=>e(s).nickname=t),modelModifiers:{trim:!0},rules:e(a).nickname,name:"nickname",placeholder:"昵称"},null,8,["modelValue","rules"])]),d("div",J,[r(n,{modelValue:e(s).password,"onUpdate:modelValue":o[3]||(o[3]=t=>e(s).password=t),modelModifiers:{trim:!0},type:"password",rules:e(a).password,name:"password",placeholder:"密码"},null,8,["modelValue","rules"])]),d("div",L,[r(n,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=t=>e(s).confirmPassword=t),modelModifiers:{trim:!0},type:"password",rules:e(a).confirmPassword,name:"confirmPassword",placeholder:"再次输入密码"},null,8,["modelValue","rules"])]),d("div",R,[r(w,{loading:e(m),type:"primary","native-type":"submit",round:"",block:""},{default:i(()=>[...o[5]||(o[5]=[c(p("确认"),-1)])]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),r(P,{to:"login",block:"",style:G({"margin-top":e(z)(8)})},{default:i(()=>[...o[6]||(o[6]=[c(p("返回登录"),-1)])]),_:1},8,["style"])])}}});typeof y=="function"&&y(A);export{A as default};
